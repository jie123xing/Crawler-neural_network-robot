<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>blob</title>
</head>
<body>

<div id="ceshi">
    ceshi
</div>
<div>
    <a download="data.wav" id="getData">下载</a>
    <form>
        <div>
            <label for="profile_pic">Choose file to upload</label>
            <input type="file" id="profile_pic" name="profile_pic">
        </div>
        <div>
            <button>Submit</button>
        </div>
    </form>
</div>
<input onclick="submit()" type="button" value="blob" />
<br>
<div><img src="F:\weather\weather1\IDEA-JAVA\FirstModule\web\myluyin\blob.jpg"></div>

<script>

    var data= 'Hello world!';
    var blob = new Blob([data], {
        type: 'text/html,charset=UTF-8'
    });
    window.URL = window.URL || window.webkitURL;
    document.querySelector("#getData").href = URL.createObjectURL(blob);

        document.getElementById("ceshi").innerHTML = "kaishixeshi";
        var formData = new FormData();

        formData.append("username", "jiyanxing");
        formData.append("accountnum", 2016211959); //数字123456会被立即转换成字符串 "123456"

        // HTML 文件类型input，由用户选择
        formData.append("userfile", fileInputElement.files[0]);

        // JavaScript file-like 对象
        var content = '<a id="a"><b id="b">hey!</b></a>'; // 新文件的正文...
        var blob = new Blob([content], {type: "text/xml"});

        formData.append("webmasterfile", blob);
        function submit() {
        var request = new XMLHttpRequest();
        request.open("POST", "blob.jsp",true);
        request.onreadystatechange=function(){//onload
            if (request.readyState==4 && request.status==200)
            {
                document.getElementById("ceshi").innerHTML=request.responseText;
            }
            else
                document.getElementById("ceshi").innerHTML="shibai";
        }
        request.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        request.send("fname=Henry");
        }
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'F:\\weather\\weather1\\IDEA-JAVA\\FirstModule\\web\\myluyin\\blob.jpg', true);
    xhr.responseType = 'blob';

    xhr.onload = function(e) {
        if (this.status == 200) {
            var blob = this.response;

            var img = document.createElement('img');
            var URL = window.URL || window.webkitURL;  //兼容处理
            var objectUrl = URL.createObjectURL(blob);
            img.onload = function(e) {
                window.URL.revokeObjectURL(img.src); // 释放 url.
            };

            img.src = objectUrl;
            document.body.appendChild(img);
            document.getElementById("ceshi").innerHTML=img.src;
        }
    };

    xhr.send();

</script>

</body>
</html>